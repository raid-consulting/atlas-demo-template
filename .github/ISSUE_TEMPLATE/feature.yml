name: Feature
description: Request or propose a change
title: "[Feature] <short title>"
labels: [atlas, p2, tshirt-s]
body:
  - type: textarea
    id: why
    attributes:
      label: Why
      placeholder: Short rationale
    validations:
      required: true

  - type: textarea
    id: what
    attributes:
      label: What
      placeholder: Concrete change in 1–3 bullets
    validations:
      required: true

  - type: textarea
    id: out_of_scope
    attributes:
      label: Out of scope
      placeholder: Things explicitly excluded
    validations:
      required: false

  - type: textarea
    id: acceptance_criteria
    attributes:
      label: Acceptance criteria
      placeholder: |
        - AC-1: ...
        - AC-2: ...
        - AC-3: ...
    validations:
      required: true

  - type: textarea
    id: environment
    attributes:
      label: Environment
      placeholder: |
        - repo: .
        - language: <language/runtime>
        - commands: <build/test commands>
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ### Atlas instructions

        <details>
        <summary>Atlas instructions</summary>

        ---
        ATLAS:REFINE
        PURPOSE: Prepare this issue for execution by OpenAI Codex (code generation/modification).
        OUTPUTS:
          - codex_prompt: mandatory; a self-contained programming task spec for Codex to act on without further context.
          - acceptance_criteria: mandatory; concise checks that validate Codex output.
          - environment: mandatory; repo path(s), language/runtime version(s), build/test commands, required tools.
        COMPLETE WHEN:
          - codex_prompt, acceptance_criteria, and environment are present in the issue body and are internally consistent.
        STATE:
          COMPLETE:
            MOVE: Ready
            ADD: [ready, atlas-prepared]
            REMOVE: [atlas, feedback-requested]
          INCOMPLETE:
            MOVE: Backlog
            ADD: [feedback-requested]
        REVIEW:
          PASS:
            MOVE: Done
          FAIL:
            MOVE: Ready
            ADD: [needs-fix]
        NOTES:
          - Use the verb “refine” to describe moving from Backlog→Ready.
          - Do not mention branches or implementation here; this step produces a Codex-ready prompt only.
        ---

        </details>
